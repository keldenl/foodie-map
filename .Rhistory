View(curr_df)
library(httr)
library(rjson)
library(dplyr)
library(OpenStreetMap)
library(ggmap)
# install.packages("ggmap", type = "source")
library(ggplot2)
library(maps)
library(plotly)
# install.packages("httr")
# install.packages("rjson")
loc <- "98105;"
limit <- 50
total <- 200
df <- data.frame(name=NULL, id=NULL, lat=NULL, long=NULL, loc=NULL, phone=NULL, rating=NULL,
rev_count=NULL, img=NULL, url=NULL, stringsAsFactors=FALSE)
# Loop through and make multiple
for(j in seq(0, total-1, 50)) {
offset <- j # Offset to the next set of 50 businesses
query <- paste0("https://api.yelp.com/v3/businesses/search?location=", loc, "&limit=", limit,
"&offset=", offset)
data <- GET(url=query, add_headers(Authorization="bearer O8RZ1gWMOz120LusXeF_s_HhkLlwLQBrd9_SLV9r9ltR8zJdHY9g_mFDtZGyX7EMa2XkHFTRbFDo_8ZhRxlWX1apsp-4gSW5U0hlIOnuwQceLTlmQCKX99nnDAMmWXYx"))
data <- fromJSON(content(data,type="text"))
for (i in 1:limit) {
curr <- data$businesses[[i]]
curr_df <- data.frame(name=curr$name, id=curr$id, lat=curr$coordinates$latitude, long=curr$coordinates$longitude,
loc=curr$location$display_address, phone=curr$phone, rating=curr$rating, rev_count=curr$review_count,
img=curr$image_url, url=curr$url)
df <- rbind(df, curr_df)
#print(nrow(curr_df))
print(paste("Added", curr$name, "| Slot", i+j))
}
}
df <- distinct(df, name, .keep_all = TRUE)
mp <- openmap(c(47.6,-122.28), c(48.7,-123.48), zoom=7)
location <- c(lon = -122.3124, lat = 47.66342)
map1 <- get_map(location = location, source = "google", zoom = 15)
maps <- ggmap(map1) +
# Add markets of shootings
geom_point(data=df, aes(name=name, rating=rating, x=long, y=lat), color="green") +
# Labels
labs(title="Restaurants near your location")
maps <- ggplotly(maps, tooltip = c("name", "rating"), dynamicTicks = FALSE, width = 500)
View(df)
library(shiny)
# Define UI for application that draws a histogram
shinyUI(fluidPage(theme = "style.css",
tags$head(
tags$style(HTML("
@import url('https://fonts.googleapis.com/css?family=Lato:300,400,700,900');
"))
),
# Application title
headerPanel("Foodie Map"),
# Sidebar with a slider input for the number of bi
# Show a plot of the generated distribution
mainPanel(
div(id="initSearch", textInput("loc", label = NULL, placeholder = "Enter your zip code or location"),
div(id="buttons", actionButton("submitSearch", "Search Map"), actionButton("logIn", "Surprise Me"))
)
)
))
library(shiny)
# Define server logic required to draw a histogram
shinyServer(function(input, output) {
# Expression that generates a histogram. The expression is
# wrapped in a call to renderPlot to indicate that:
#
#  1) It is "reactive" and therefore should be automatically
#     re-executed when inputs change
#  2) Its output type is a plot
observeEvent(input$submitSearch, {
})
})
runApp()
install.packages('httr')
install.packages('rjson')
install.packages('OpenStreetMap')
install.packages('maps')
library(httr)
library(rjson)
library(dplyr)
library(OpenStreetMap)
library(ggmap)
library(ggplot2)
library(maps)
library(plotly)
library(httr)
library(rjson)
library(dplyr)
library(OpenStreetMap)
library(ggmap)
library(ggplot2)
library(maps)
library(plotly)
# Changable Variables
limit <- 50 # Unchanged
total <- 200 # Total amount of restaurants you want to return (Max ~1000)
loc <- "1135 ne campus parkway, wa" # Location you're searching for
long_lat <- as.numeric(geocode(loc))
loc <- revgeocode(long_lat, output="more") # View() to see more about the location
zip <- loc$postal_code
# df stores all the restaurant information
df <- data.frame(name=NULL, id=NULL, lat=NULL, long=NULL, loc=NULL, phone=NULL, rating=NULL,
rev_count=NULL, img=NULL, url=NULL, stringsAsFactors=FALSE)
# Loop through and add restaurants to the dataframe df
for(j in seq(0, total-1, 50)) {
offset <- j # Offset to the next set of 50 businesses
query <- paste0("https://api.yelp.com/v3/businesses/search?location=", zip, "&limit=", limit,
"&offset=", offset, "&term=restaurant")
data <- GET(url=query, add_headers(Authorization="bearer O8RZ1gWMOz120LusXeF_s_HhkLlwLQBrd9_SLV9r9ltR8zJdHY9g_mFDtZGyX7EMa2XkHFTRbFDo_8ZhRxlWX1apsp-4gSW5U0hlIOnuwQceLTlmQCKX99nnDAMmWXYx"))
data <- fromJSON(content(data,type="text"))
for (i in 1:limit) {
curr <- data$businesses[[i]]
curr_df <- data.frame(name=curr$name, id=curr$id, lat=curr$coordinates$latitude, long=curr$coordinates$longitude,
loc=curr$location$display_address, phone=curr$phone, rating=curr$rating, rev_count=curr$review_count,
img=curr$image_url, url=curr$url)
df <- rbind(df, curr_df)
print(paste("Added", curr$name, "| Slot", i+j))
}
}
df <- distinct(df, name, .keep_all = TRUE)
# Get a map for the location entered
location <- c(lon = long_lat[1], lat = long_lat[2])
map1 <- get_map(location = location, source = "google", zoom = 15)
# Make a map with restaurants as points on it
maps <- ggmap(map1) +
# Add restaurant markers
geom_point(data=df, aes(name=name, rating=rating, x=long, y=lat), color="green") +
coord_fixed(1.3) +
# Labels
labs(title="Restaurants near your location")
maps <- ggplotly(maps, tooltip = c("name", "rating"), dynamicTicks = FALSE, width = 500)
# Check out the map!
maps
install.packages('ggmap')
library(httr)
library(rjson)
library(dplyr)
library(OpenStreetMap)
library(ggmap)
library(ggplot2)
library(maps)
library(plotly)
# Changable Variables
limit <- 50 # Unchanged
total <- 200 # Total amount of restaurants you want to return (Max ~1000)
loc <- "1135 ne campus parkway, wa" # Location you're searching for
long_lat <- as.numeric(geocode(loc))
loc <- revgeocode(long_lat, output="more") # View() to see more about the location
zip <- loc$postal_code
# df stores all the restaurant information
df <- data.frame(name=NULL, id=NULL, lat=NULL, long=NULL, loc=NULL, phone=NULL, rating=NULL,
rev_count=NULL, img=NULL, url=NULL, stringsAsFactors=FALSE)
# Loop through and add restaurants to the dataframe df
for(j in seq(0, total-1, 50)) {
offset <- j # Offset to the next set of 50 businesses
query <- paste0("https://api.yelp.com/v3/businesses/search?location=", zip, "&limit=", limit,
"&offset=", offset, "&term=restaurant")
data <- GET(url=query, add_headers(Authorization="bearer O8RZ1gWMOz120LusXeF_s_HhkLlwLQBrd9_SLV9r9ltR8zJdHY9g_mFDtZGyX7EMa2XkHFTRbFDo_8ZhRxlWX1apsp-4gSW5U0hlIOnuwQceLTlmQCKX99nnDAMmWXYx"))
data <- fromJSON(content(data,type="text"))
for (i in 1:limit) {
curr <- data$businesses[[i]]
curr_df <- data.frame(name=curr$name, id=curr$id, lat=curr$coordinates$latitude, long=curr$coordinates$longitude,
loc=curr$location$display_address, phone=curr$phone, rating=curr$rating, rev_count=curr$review_count,
img=curr$image_url, url=curr$url)
df <- rbind(df, curr_df)
print(paste("Added", curr$name, "| Slot", i+j))
}
}
df <- distinct(df, name, .keep_all = TRUE)
# Get a map for the location entered
location <- c(lon = long_lat[1], lat = long_lat[2])
map1 <- get_map(location = location, source = "google", zoom = 15)
# Make a map with restaurants as points on it
maps <- ggmap(map1) +
# Add restaurant markers
geom_point(data=df, aes(name=name, rating=rating, x=long, y=lat), color="green") +
coord_fixed(1.3) +
# Labels
labs(title="Restaurants near your location")
maps <- ggplotly(maps, tooltip = c("name", "rating"), dynamicTicks = FALSE, width = 500)
# Check out the map!
maps
install.packages("ggmap", type = "source")
install.packages("ggmap", type = "source")
location <- c(lon = long_lat[1], lat = long_lat[2])
map1 <- get_map(location = location, source = "google", zoom = 15)
maps <- ggmap(map1) +
# Add restaurant markers
geom_point(data=df, aes(name=name, rating=rating, x=long, y=lat), color="green") +
coord_fixed(1.3) +
# Labels
labs(title="Restaurants near your location")
maps <- ggplotly(maps, tooltip = c("name", "rating"), dynamicTicks = FALSE, width = 500)
